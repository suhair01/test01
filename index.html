<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Avalyfi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.2/dist/ethers.umd.min.js"></script>
</head>
<body>
  <!-- Wallet Connection Modal -->
  <div class="wallet-modal" id="walletModal">
    <div class="wallet-modal-content">
      <div class="wallet-modal-header">
        <h3>Connect Wallet</h3>
        <button class="close-modal" onclick="closeModal()">&times;</button>
      </div>
      <div class="wallet-options">
        <button class="wallet-option" onclick="connectWallet('metamask')">
          <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" alt="MetaMask">
          <span>MetaMask</span>
        </button>
        <button class="wallet-option" onclick="connectWallet('walletconnect')">
          <img src="https://altcoinsbox.com/wp-content/uploads/2023/03/wallet-connect-logo.png" alt="WalletConnect">
          <span>WalletConnect</span>
        </button>
        <button class="wallet-option" onclick="connectWallet('coinbase')">
          <img src="https://altcoinsbox.com/wp-content/uploads/2023/03/coinbase-wallet-logo.png" alt="Coinbase Wallet">
          <span>Coinbase Wallet</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Header -->
  <div class="header-bar">
    <div class="header-left">
      <img src="logo.jpg" alt="RubySwap Logo" class="logo" />
      <span class="brand-name">Avaly</span>
    </div>
    <button class="connect-btn" onclick="openModal()">Connect Wallet</button>
  </div>

  <!-- Swap UI -->
  <div class="swap-container">
    <div class="top-actions">
      <button class="icon-btn refresh-btn" onclick="location.reload()">
        <svg xmlns="http://www.w3.org/2000/svg" fill="#666" width="20" height="20" viewBox="0 0 24 24">
          <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.22-.37 2.35-1 3.29l1.46 1.46C19.11 15.08 20 13.13 20 11c0-4.42-3.58-8-8-8zm-6.46 2.71C4.89 8.92 4 10.87 4 13c0 4.42 3.58 8 8 8v3l4-4-4-4v3c-3.31 0-6-2.69-6-6 0-1.22.37-2.35 1-3.29L5.54 6.71z"/>
        </svg>
      </button>
      <div class="settings-wrapper">
        <button class="icon-btn settings-btn" onclick="toggleSlippage()">⚙️</button>
        <div class="slippage-popup" id="slippagePopup">
          <label>Slippage:</label>
          <div class="slippage-input-wrapper">
            <input id="slippage" value="1" />
            <span class="percent-label">%</span>
          </div>
        </div>
      </div>
    </div>

    <div class="token-box">
      <div class="token-row">
        <div class="token-select">
          <img id="inLogo" src="" onerror="this.src='gold.png'" />
          <select id="tokenInSelect" onchange="updateLogos(); updateBalances(); updateEstimate()"></select>
        </div>
        <div class="balance" id="balanceIn">Balance: 0</div>
      </div>
      <input class="amount-input" id="tokenInAmount" placeholder="0.0" oninput="updateEstimate(); validateSwap()">
      <div class="percentage-buttons">
        <button onclick="setPercentage(25)">25%</button>
        <button onclick="setPercentage(50)">50%</button>
        <button onclick="setPercentage(100)">100%</button>
      </div>
    </div>

    <button class="reverse-btn" onclick="reverseTokens()">⇅</button>

    <div class="token-box">
      <div class="token-row">
        <div class="token-select">
          <img id="outLogo" src="" onerror="this.src='gold.png'" />
          <select id="tokenOutSelect" onchange="updateLogos(); updateBalances(); updateEstimate()"></select>
        </div>
        <div class="balance" id="balanceOut">Balance: 0</div>
      </div>
      <input class="amount-input" id="tokenOutAmount" placeholder="0.0" readonly>
    </div>

    <button class="btn" onclick="swap()" id="swapBtn" disabled>Swap</button>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-top">
        <div class="socials">
          <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/2111/2111370.png" alt="Discord" /></a>
          <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/733/733579.png" alt="Twitter" /></a>
          <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/25/25231.png" alt="GitHub" /></a>
        </div>
        <div class="footer-links">
          <a href="#">Documents</a>
          <a href="#">Listings</a>
          <a href="#">Support</a>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="footer-brand">
          <img src="logo.jpg" class="footer-logo" />
          <div>
            <strong>Avaly</strong><br />
            <small>Seamless DEX on Avalanche</small>
          </div>
        </div>
        <div class="legal">© Avaly 2025 · Legal Disclaimer</div>
      </div>
    </div>
  </footer>

  <div id="toastContainer"></div>

  <script src="script.js"></script>
</body>
</html>
