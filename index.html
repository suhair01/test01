<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Avalyfi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.2/dist/ethers.umd.min.js"></script>
</head>
<body>

<div class="container">
  <!-- Header -->
  <div class="header-bar">
    <div class="header-left">
      <img src="logo.jpg" alt="Avaly Logo" class="logo" />
      <span class="brand-name">Avaly</span>
    </div>
    <div class="header-buttons">
      <button class="connect-btn" onclick="connect()">Connect Wallet</button>
      <div class="profile-wrapper">
        <button class="profile-btn" onclick="toggleProfile()">üë§ Profile</button>
        <div id="profilePopover" class="profile-popover">
          <div class="profile-box">
            <div class="popover-header">
              <span>üë§ <strong>Wallet</strong></span>
              <button class="close-profile" onclick="toggleProfile()">√ó</button>
            </div>
            <div class="profile-wallet">
              <code id="profileAddress">0x966e...b9E8</code>
            </div>
            <div class="profile-actions">
              <button class="profile-action" onclick="copyAddress(event)">üìã Copy Address</button>
              <a id="snowtraceLink" href="#" target="_blank" class="profile-action">üîó View on Snowtrace</a>
            </div>
          </div>
        </div>
      </div>
      <button id="switchNetworkBtn" style="display:none;" onclick="switchToAvalanche()">Switch to Avalanche</button>
    </div>
  </div>

  <!-- Swap Section -->
  <div class="center-wrapper">
    <div class="swap-container">
      <div class="top-actions">
        <button class="reload-btn" onclick="handleRefresh()" id="refreshBtn" title="Refresh Estimate">
          <span id="refreshIcon">
            <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="1 4 1 10 7 10"></polyline>
              <polyline points="23 20 23 14 17 14"></polyline>
              <path d="M20.49 9A9 9 0 0 0 6.46 6.37L1 10m22 4l-5.46 3.63A9 9 0 0 1 3.51 15"></path>
            </svg>
          </span>
        </button>

        <div class="settings-wrapper">
          <button class="icon-btn settings-btn" onclick="toggleSlippage()">‚öôÔ∏è</button>
          <div class="slippage-popup" id="slippagePopup">
            <label>Slippage:</label>
            <div class="slippage-input-wrapper">
              <input id="slippage" value="1" />
              <span class="percent-label">%</span>
            </div>
          </div>
        </div>
      </div>

      <div class="token-box">
        <div class="token-row">
          <div class="token-select" onclick="openModal('in')">
            <div class="token-display">
              <img id="inLogo" src="avaxlogo.png" class="token-logo" />
              <span id="inSymbol">AVAX</span>
              <span class="dropdown-arrow">‚ñº</span>
            </div>
            <select id="tokenInSelect" style="display:none;"></select>
          </div>
          <div class="balance" id="balanceIn">Balance: 0</div>
        </div>
        <input class="amount-input" id="tokenInAmount" placeholder="0.0" oninput="updateEstimate(); validateSwap()">
        <div class="percentage-buttons">
          <button onclick="setPercentage(25)">25%</button>
          <button onclick="setPercentage(50)">50%</button>
          <button onclick="setPercentage(100)">100%</button>
        </div>
      </div>

      <button class="reverse-btn" onclick="reverseTokens()">‚áÖ</button>

      <div class="token-box">
        <div class="token-row">
          <div class="token-select" onclick="openModal('out')">
            <div class="token-display">
              <img id="outLogo" src="usdc.png" class="token-logo" />
              <span id="outSymbol">USDC</span>
              <span class="dropdown-arrow">‚ñº</span>
            </div>
            <select id="tokenOutSelect" style="display:none;"></select>
          </div>
          <div class="balance" id="balanceOut">Balance: 0</div>
        </div>
        <input class="amount-input" id="tokenOutAmount" placeholder="0.0" readonly>
      </div>

      <button class="btn" onclick="swap()" id="swapBtn" disabled>Swap</button>
    </div>
  </div>

  <!-- Token Modal -->
  <div id="tokenModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <span class="modal-title">Select a token</span>
        <button class="close-modal" onclick="closeModal()">√ó</button>
      </div>
      <input type="text" id="tokenSearch" placeholder="Search name or address" oninput="filterTokens()" />
      <div id="tokenList"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-top">
        <div class="socials">
          <a href="#"><img src="discord.png" /></a>
          <a href="#"><img src="twitter.png" /></a>
          <a href="#"><img src="github.png" /></a>
        </div>
        <div class="footer-links">
          <a href="#">Docs</a>
          <a href="#">Support</a>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="footer-brand">
          <img src="logo.jpg" class="footer-logo" />
          <div>
            <strong>Avaly</strong><br />
            <small>Seamless DEX on Avalanche</small>
          </div>
        </div>
        <div class="legal">¬© Avaly 2025 ¬∑ All rights reserved</div>
      </div>
    </div>
  </footer>
</div>

<div id="toastContainer"></div>
<script src="script.js"></script>
</body>
</html>
